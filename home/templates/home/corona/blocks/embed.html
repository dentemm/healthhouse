{% load wagtailembeds_tags %}

<div class="row">
  <div style="width: 100%">
    <div style="padding-top: 32%">
      <iframe width="100%" height="32%" src="{{Â value.url }}" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" style="position:absolute;top:0;">
      </iframe>
    </div>
  </div>
  <div style="padding-top: 65%"></div>
</div>

<script defer>
  window.onload = function () {

    const getId = (url) => {
        const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/;
        const match = url.match(regExp);

        return (match && match[2].length === 11) ? match[2] : null;
    };
        
    const videoId = getId('{{ value.url }}');

    $('iframe').attr('src', `//www.youtube.com/embed/${videoId}`);
  }
</script>